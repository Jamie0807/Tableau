# Tableau 动态仪表盘制作指南

## 📊 业务场景说明

这是一个**电商销售分析场景**，包含完整的业务数据和分析维度，适合制作专业的动态仪表盘与分析报告。

### 数据集说明

1. **sales_data.csv** - 核心销售数据（50条真实交易记录）
   - 订单信息：订单ID、日期、金额、数量、折扣、利润
   - 客户维度：客户ID、客户类型（企业/个人）
   - 地理维度：地区、省份、城市（覆盖华东、华北、华南等）
   - 产品维度：产品名称、类别、子类别
   - 运输信息：配送方式

2. **customer_info.csv** - 客户主数据
   - 客户详细信息：注册日期、信用等级、年度预算
   - 联系方式：联系人、电话、邮箱

3. **product_catalog.csv** - 产品目录
   - 产品详情：单价、成本、供应商
   - 库存信息：库存量、安全库存、上架日期

4. **targets.csv** - 销售目标
   - 月度目标：按地区和产品类别设定
   - KPI基准：销售目标、利润目标

---

## 🎯 推荐的仪表盘设计

### 1️⃣ 销售总览仪表盘（Executive Dashboard）

**关键指标卡片（KPI Cards）**
- 总销售额 | 总利润 | 利润率 | 订单总数
- 平均订单价值 | 客户数量 | 环比增长率

**核心可视化**
- 📈 **销售趋势线图**：按月/周展示销售额和利润趋势
- 📊 **地区对比柱状图**：各地区销售额和目标达成率
- 🥧 **产品类别饼图**：销售额占比分布
- 🗺️ **地理热力图**：各省份/城市销售表现

**交互筛选器**
- 日期范围筛选器
- 地区下拉菜单
- 产品类别复选框
- 客户类型筛选

---

### 2️⃣ 产品分析仪表盘（Product Analytics）

**可视化组件**
- 📊 **产品排行榜**：Top 10 销售产品（条形图）
- 🔍 **类别详细分析**：子类别销售对比（树状图）
- 💰 **利润率分析**：产品利润率散点图（价格 vs 利润率）
- 📦 **库存预警**：库存量低于安全库存的产品（表格）
- 💸 **折扣影响分析**：折扣率与销售量关系（散点图）

**计算字段示例**
```
利润率 = SUM([利润]) / SUM([销售额])
目标达成率 = SUM([销售额]) / SUM([销售目标])
平均折扣 = AVG([折扣])
```

---

### 3️⃣ 客户分析仪表盘（Customer Insights）

**分析维度**
- 👥 **客户细分**：企业客户 vs 个人客户对比
- 💎 **客户价值分层**：按累计消费额分组（RFM分析）
- 🏆 **Top客户排行**：贡献最大的客户（TOP 20）
- 📊 **客户分布**：按信用等级/地区分布
- 📈 **客户增长趋势**：新客户获取趋势

**高级功能**
- 客户生命周期价值（CLV）计算
- 重复购买率分析
- 客户流失预警

---

### 4️⃣ 运营分析仪表盘（Operations Dashboard）

**运营指标**
- 🚚 **运输方式分析**：各配送方式订单量和成本
- ⏱️ **时间分析**：
  - 按星期几的销售模式（柱状图）
  - 按小时的订单分布（如果有时间戳）
- 🎯 **目标完成情况**：
  - 实际 vs 目标对比（子弹图）
  - 目标达成进度条
- 📉 **异常检测**：识别异常订单或退货

---

## 🔧 Tableau 操作步骤

### Step 1: 数据连接

1. 打开 Tableau Desktop
2. 连接到数据：
   - **连接** → **文本文件** → 选择 `sales_data.csv`
   - 添加其他表：拖入 `customer_info.csv`、`product_catalog.csv`、`targets.csv`

3. 建立数据关系：
   ```
   sales_data.客户ID = customer_info.客户ID
   sales_data.产品名称 = product_catalog.产品名称
   sales_data.地区 = targets.地区 AND
   sales_data.产品类别 = targets.产品类别 AND
   MONTH(sales_data.订单日期) = targets.月份
   ```

### Step 2: 数据准备

**创建计算字段**

1. **利润率**
```
SUM([利润]) / SUM([销售额])
```

2. **目标达成率**
```
SUM([销售额]) / SUM([销售目标])
```

3. **订单年月**
```
DATE(DATETRUNC('month', [订单日期]))
```

4. **是否达标**
```
IF SUM([销售额]) >= SUM([销售目标]) THEN "达标" ELSE "未达标" END
```

5. **客户价值分层**
```
IF SUM([销售额]) >= 50000 THEN "高价值"
ELSEIF SUM([销售额]) >= 20000 THEN "中价值"
ELSE "低价值"
END
```

### Step 3: 创建可视化

#### 📈 示例1: 销售趋势图
1. 拖动 `订单日期` 到列
2. 拖动 `销售额` 到行
3. 右键点击 `订单日期` → 选择"月份"
4. 添加趋势线：分析面板 → 趋势线
5. 添加参考线：右键Y轴 → 添加参考线（显示平均值）

#### 📊 示例2: 地区对比（带目标）
1. 拖动 `地区` 到列
2. 拖动 `销售额` 和 `销售目标` 到行
3. 更改标记类型为"条形图"
4. 创建双轴：右键第二个度量 → 双轴
5. 同步轴：右键轴 → 同步轴

#### 🥧 示例3: 产品类别占比
1. 拖动 `产品类别` 到颜色
2. 拖动 `销售额` 到角度
3. 标记类型改为"饼图"
4. 添加标签：拖动 `销售额` 到标签，显示百分比

### Step 4: 创建仪表盘

1. **新建仪表盘**：点击底部 "新建仪表盘" 图标
2. **设置尺寸**：自动 或 固定尺寸（1920x1080）
3. **拖放工作表**：将创建好的图表拖到画布
4. **添加布局容器**：使用水平/垂直容器组织布局

**推荐布局结构**
```
┌─────────────────────────────────────────┐
│  KPI指标卡片区域（水平排列）              │
│  [销售额] [利润] [订单数] [利润率]        │
├─────────────────────────────────────────┤
│          │                               │
│  地区图   │    销售趋势图                 │
│          │                               │
├──────────┴───────────────────────────────┤
│  产品类别饼图  │  Top产品排行             │
│                │                         │
└─────────────────────────────────────────┘
```

### Step 5: 添加交互功能

**筛选器设置**
1. 拖动维度到"筛选器"货架
2. 右键筛选器 → 显示筛选器
3. 筛选器类型选择：下拉列表/单值列表/滑块

**仪表盘操作**
1. 选择工作表 → 仪表盘 → 操作
2. 添加筛选器操作：点击一个图表筛选其他图表
3. 添加突出显示：悬停高亮相关数据
4. 添加URL操作：点击跳转到详细页面

**参数控件**
1. 创建参数（如：日期对比）
2. 在仪表盘中显示参数控件
3. 在计算字段中使用参数

### Step 6: 美化与优化

**视觉设计**
- 统一配色方案（品牌色）
- 添加标题和说明文本
- 使用图像/Logo（拖入图像对象）
- 设置工具提示（详细信息）

**性能优化**
- 使用数据提取（Extract）而非实时连接
- 限制筛选器数值范围
- 隐藏未使用的字段
- 聚合数据到合适粒度

---

## 📝 高级功能实现

### 动态标题
```
"销售额: " + STR(SUM([销售额])) + " | 日期: " + STR([参数.日期范围])
```

### 同比分析
```
(SUM([销售额]) - LOOKUP(SUM([销售额]), -12)) / LOOKUP(SUM([销售额]), -12)
```

### 移动平均
```
WINDOW_AVG(SUM([销售额]), -6, 0)
```

### 条件格式
- 使用计算字段返回颜色
- 在标记卡中使用颜色阶梯
- 基于规则的颜色编码

---

## 🎨 最佳实践

### 设计原则
1. **简洁清晰**：每个仪表盘专注3-5个核心问题
2. **视觉层次**：最重要的指标放在左上角
3. **一致性**：统一配色、字体、图表类型
4. **交互性**：提供筛选和钻取功能
5. **响应式**：考虑不同屏幕尺寸

### 数据故事
1. 概览 → 发现问题 → 深入分析 → 行动建议
2. 使用故事点（Story Points）串联多个仪表盘
3. 添加注释和洞察说明

### 发布与分享
- **Tableau Server/Online**：发布到服务器共享
- **Tableau Public**：免费公开分享
- **导出**：PDF/图片格式
- **嵌入**：Web嵌入代码

---

## 🚀 快速启动清单

- [ ] 导入所有4个CSV文件到Tableau
- [ ] 建立表之间的关系
- [ ] 创建基础计算字段（利润率、目标达成率）
- [ ] 制作5-8个基础图表
- [ ] 创建销售总览仪表盘
- [ ] 添加筛选器和交互功能
- [ ] 美化并测试交互
- [ ] 创建其他主题仪表盘
- [ ] 导出或发布

---

## 💡 分析问题示例

使用此数据集，您可以回答以下业务问题：

1. **销售表现**：哪个地区/产品/客户群表现最好？
2. **趋势分析**：销售趋势如何？是否有季节性？
3. **目标达成**：各地区目标完成率如何？
4. **产品优化**：哪些产品利润率高？哪些需要优化？
5. **客户洞察**：高价值客户特征？客户留存如何？
6. **运营效率**：不同配送方式的效率和成本？
7. **折扣策略**：折扣对销售和利润的影响？
8. **库存管理**：哪些产品需要补货？

---

## 📚 学习资源

- Tableau 官方教程：https://www.tableau.com/learn/training
- Tableau 社区论坛：https://community.tableau.com
- 示例仪表盘库：https://public.tableau.com/gallery
